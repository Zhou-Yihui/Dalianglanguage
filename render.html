<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>星门字符渲染器</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
    background: #0b0c2a;
    color: #fff;
    font-family: "Microsoft YaHei";
    text-align: center;
    margin: 0;
    padding: 20px;
}
canvas {
    background: #111;
    border: 1px solid #f0c000;
    border-radius: 6px;
    margin-top: 20px;
}
.char-item {
    display: inline-block;
    border: 1px solid #f0c000;
    border-radius: 6px;
    margin: 10px;
    padding: 10px;
}
h2 { margin-bottom: 10px; }
</style>
</head>
<body>
<h2>🌌 星门字符渲染器</h2>
<div id="charContainer"></div>

<script>
const container = document.getElementById("charContainer");

// 从 localStorage 加载字符数据
let allChars = JSON.parse(localStorage.getItem("stargate_chars")) || {chars: []};

function renderChar(charObj) {
    const canvas = document.createElement("canvas");
    canvas.width = 100;
    canvas.height = 100;
    const ctx = canvas.getContext("2d");
    ctx.strokeStyle = "#f0c000";
    ctx.lineWidth = 2;
    ctx.lineJoin = "round";
    ctx.lineCap = "round";

    charObj.strokes.forEach(stroke => {
        if (stroke.length > 0) {
            ctx.beginPath();
            ctx.moveTo(stroke[0].x, stroke[0].y);
            for (let i = 1; i < stroke.length; i++) {
                ctx.lineTo(stroke[i].x, stroke[i].y);
            }
            ctx.stroke();
        }
    });
    return canvas;
}

function displayChars() {
    container.innerHTML = "";
    if (allChars.chars.length === 0) {
        container.textContent = "暂无字符，请先保存字符！";
        return;
    }
    allChars.chars.forEach(c => {
        const div = document.createElement("div");
        div.className = "char-item";
        div.appendChild(renderChar(c));
        const label = document.createElement("div");
        label.textContent = c.name;
        div.appendChild(label);
        container.appendChild(div);
    });
}

displayChars();
</script>
</body>
</html>
